<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.6"/>
<title>Test Automation Framework: FUI Guidelines</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
  $(window).load(resizeHeight);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">Test Automation Framework
   &#160;<span id="projectnumber">01/31/17/16:21:23</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.6 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li class="current"><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('fui_guide_page.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Namespaces</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Pages</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="headertitle">
<div class="title">FUI Guidelines </div>  </div>
</div><!--header-->
<div class="contents">
<div class="toc"><h3>Table of Contents</h3>
<ul><li class="level1"><a href="#fui_sec1">General Information About FUI</a></li>
<li class="level1"><a href="#fui_sec2">How to Create FUI Test Case</a></li>
<li class="level1"><a href="#fui_sec2_1">JSON File Structure</a></li>
<li class="level1"><a href="#fui_sec2_2">FUI Test Case Example</a></li>
<li class="level1"><a href="#fui_sec3">FUI Test Name Convention</a></li>
<li class="level1"><a href="#fui_sec4">Variables Used in JSON</a></li>
<li class="level1"><a href="#fui_sec5">Launch Examples</a></li>
</ul>
</div>
<div class="textblock"><h1><a class="anchor" id="fui_sec1"></a>
General Information About FUI</h1>
<p>FUI is used for testing different ONS User interfaces, using CLI and SNMP.</p>
<p>The main idea of FUI testing is to use different parametrized test cases which compare UI input/output with XML-RPC output/input:</p>
<pre class="fragment">    -# test_cli_set__xmlrpc_get
    -# test_xmlrpc_set_cli_get
    -# test_snmp_set_xmlrpc_get
    -# test_xmlrpc_set_snmp_get</pre><p>Input values for each test case are taken from the same configuration file, but each test case has its own sets of fields (see <a class="el" href="fui_guide_page.html#fui_sec2_1">JSON File Structure</a>).</p>
<p>The JSON configuration file may contain as many test cases as you need to cover your functionality. But there present a logical structure:</p>
<p>Configuration files are located at:</p>
<pre class="fragment">    $TEST_ROOT/tests/ui/ui_tests/{simple I P2}}/{mib_name}/{XMLRPC Table name}.json.</pre><ul>
<li><b> {simple I P2} </b> - 'simple' if the test case requires configuration with a standalone device, 'P2P' if the test case requires configuration with two switches with links between them;</li>
<li><b> {mib name} </b> - enterprise mib name which covers necessary functionality;</li>
<li><b> {XMLRPC Table name}.json </b> - table name from XMLRPC.</li>
</ul>
<h1><a class="anchor" id="fui_sec2"></a>
How to Create FUI Test Case</h1>
<p>To create a FUI test case, you need to write a JSON configuration file with special records (xmlrpc call, snmp requests, CLI commands).<br/>
<br/>
 The structure of FUI test cases is described in <a class="el" href="fui_guide_page.html#fui_sec2_2">FUI Test Case Example</a>. </p>
<h1><a class="anchor" id="fui_sec2_1"></a>
JSON File Structure</h1>
<p>JSON object type schema where key is TC name, values are TC body. TC Body contains the following fields:</p>
<ul>
<li><b> doc_string </b> - brief description of TC<br/>
<br/>
</li>
<li><b> xmlrpc_setup </b> - pre-configuration, if needed (not applicable for test_cli_set__xmlrpc_get).<br/>
<br/>
</li>
<li><b> xmlrpc_set </b> - list of xml/rpc set commands that will be executed on device, commands separated by dashes.<br/>
<br/>
</li>
<li><b> xmlrpc_get </b> - list of xml/rpc get commands that will be executed on device, commands separated by dashes.<br/>
<br/>
</li>
<li><b> snmp_set </b> - list of SNMP set requests that will be executed on device, commands separated by dashes.<br/>
<br/>
</li>
<li><b> snmp_get </b> - list of SNMP get requests that will be executed on device, commands separated by dashes.<br/>
<br/>
</li>
<li><b> cli_set </b> - list of full CLI commands that will be executed on device, commands separated by dashes.<br/>
<br/>
</li>
<li><b> cli_get </b> - list of CLI get request that will be executed on device.<br/>
<ul>
<li>CLI get requests have the following format:<br/>
<ul>
<li><b> [CLI table name] </b> – Name which will added to “show” and will be executed on the device.<br/>
<br/>
</li>
<li><b> [Table Identifier] </b> – Unique table identifier which consists from two parts: 1st part is column name, and the second is row id in same column.<br/>
<br/>
</li>
<li><b> [Column name] </b> – Column name from which the value will be taken.<br/>
<br/>
</li>
</ul>
</li>
</ul>
</li>
<li><b> xmlrpc_set_result </b> - expected result after “ xmlrpc_set” commands executions.<br/>
<br/>
</li>
<li><b> xmlrpc_get_result </b> - expected result after “ xmlrpc_get” commands executions.<br/>
<br/>
</li>
<li><b> snmp_set_result </b> - expected result after “snmp_set” request executions.<br/>
<br/>
</li>
<li><b> snmp_get_result </b> - expected result after “snmp_get” request executions.<br/>
<br/>
</li>
<li><b> cli_set_result </b> - expected result after “cli_set” commands executions.<br/>
<br/>
</li>
<li><b> cli_get_result </b> - expected result after “cli_get” commands executions.<br/>
<br/>
</li>
</ul>
<h1><a class="anchor" id="fui_sec2_2"></a>
FUI Test Case Example</h1>
<pre class="fragment">    {
        "test_vlans_name_vlan10": {
            "doc_string": ["@brief Verify Vlans name vlan 10."],
            "xmlrpc_setup": [],
            "xmlrpc_set": [{"1":["nb.Vlans.addRow(10, 'VLAN-10')"]}],
            "xmlrpc_get": [{"1":["nb.Vlans.get.name(2)"]}],
            "snmp_set": [],
            "snmp_get": [{"1":["onsSnmpAgentVlansName 10"]}],
            "cli_set": [{"1":["enable", "vlan-database", "vlan 10"]}],
            "cli_get": [{"1":["enable, none 0, none", "vlan, VLAN 10, Name"]}],
            "xmlrpc_set_result": [{"1":["0"]}],
            "xmlrpc_get_result": [{"1":["VLAN-10"]}],
            "snmp_set_result": [],
            "snmp_get_result": [{"1":["vlan10"]}],
            "cli_set_result": [{"1":["Switch++ #","Switch++ (vlan)#", "Switch++(vlan)#"]}],
            "cli_get_result": [{"1":["Switch++ #","VLAN-10"]}]
        }
    }</pre><h1><a class="anchor" id="fui_sec3"></a>
FUI Test Name Convention</h1>
<p>During TC execution, the first part of the name will be generated automatically and it looks like the following:</p>
<pre class="fragment">    test_[parametrized testcases name]_[configuration name]_[mibname]_[xml table name]</pre><p> In JSON, you should specify if it is a row action or not, the parameter name which you are verifying, the action which will be done with the parameter, and if a few similar actions should be done with the same parameter, then divide them by different numeric value. Therefore, the name part from JSON should look like following:</p>
<pre class="fragment">    [row(if it needed)]_[parameter name]_[very short action description]_[numeric value(if it needed)]</pre><p> Examples of the name part from JSON:</p>
<pre class="fragment">    portId_VALID_VALUE
    portId_Negative_Get_Wrong_portId
    row_add_selector_Tcp</pre><p> Same name during TC execution:</p>
<pre class="fragment">    test__xmlrpc_set__snmp_get_P2P_ons_dcbx_DcbxRemotes_portId_VALID_VALUE
    test__cli_set__xmlrpc_get_P2P_ons_dcbx_DcbxRemotes_portId_Negative_Get_Wrong_portId
    test__xmlrpc_set__cli_get_P2P_ons_dcbx_DcbxRemotes_row_add_selector_Tcp</pre> <h1><a class="anchor" id="fui_sec4"></a>
Variables Used in JSON</h1>
<p>There present some variables for tests purpose:<br/>
<br/>
</p>
<ul>
<li><b> ports_list </b> - list of ports on device. Access to elements in TC: “$ports_list|1|$” - 1st element, “$ports_list|-1|$” - last elements<br/>
<br/>
</li>
<li><b> connected_ports </b> - list of connected ports on device<br/>
<br/>
</li>
<li><b> not_connected_ports </b> - list of not connected ports on device<br/>
<br/>
</li>
<li><b> nonexisting_ports </b> - list of non existed ports on device<br/>
<br/>
</li>
<li><b> ports_name_list </b> - list of ports name on device<br/>
<br/>
</li>
<li><b> port_max </b> - port number max+1<br/>
<br/>
</li>
<li><b> port_min </b> - port number min-1<br/>
<br/>
</li>
</ul>
<h1><a class="anchor" id="fui_sec5"></a>
Launch Examples</h1>
<p>To launch all available TCs, you should use one of the following commands:<br/>
 CLI: </p>
<pre class="fragment">    sudo py.test ui/test_ui.py --setup=real_dev_fui.json -k test_xmlrpc_set__cli_get_simple
    sudo py.test ui/test_ui.py --setup=real_dev_fui.json -k test_cli_set__xmlrpc_get_simple</pre><p>SNMP: </p>
<pre class="fragment">    sudo py.test ui/test_ui.py --setup=real_dev_fui.json -k test_xmlrpc_set__snmp_get_simple</pre><p>CLI point-to-point: CLI point-to-point: </p>
<pre class="fragment">    sudo py.test ui/test_ui.py --setup=real_p2p_fui.json -k test_xmlrpc_set__cli_get_P2P
    sudo py.test ui/test_ui.py --setup=real_p2p_fui.json -k test_cli_set__xmlrpc_get_P2P</pre><p>SNMP point-to-point: </p>
<pre class="fragment">    sudo py.test ui/test_ui.py --setup=real_p2p_fui.json -k
    test_xmlrpc_set__snmp_get_P2P</pre><p>If you need to launch some specific test case(s), you should create your own command using the following rule:</p>
<pre class="fragment">    sudo py.test ui/test_ui.py --setup=real_dev_fui.json -k test_{test_template}_{simple | P2}}_{mib_name}_{XMLRPC Table name}_{test name}
    sudo py.test ui/test_ui.py --setup=sim_lxc_p2p_fui.json -k test_xmlrpc_set__snmp_get_P2P_ons_dcbx_DcbxRemotes_test_dcbx_DcbxRemotes_portId_VALID_VALUE --loglevel=DEBUG</pre> </div></div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated on Tue Jan 31 2017 16:21:23 for Test Automation Framework by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.6 </li>
  </ul>
</div>
</body>
</html>
