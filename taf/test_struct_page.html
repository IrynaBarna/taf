<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.6"/>
<title>Test Automation Framework: Test Case Structure</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
  $(window).load(resizeHeight);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">Test Automation Framework
   &#160;<span id="projectnumber">01/31/17/16:21:23</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.6 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li class="current"><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('test_struct_page.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Namespaces</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Pages</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="headertitle">
<div class="title">Test Case Structure </div>  </div>
</div><!--header-->
<div class="contents">
<div class="toc"><h3>Table of Contents</h3>
<ul><li class="level1"><a href="#test_struct_sec1">Header</a></li>
<li class="level1"><a href="#test_struct_sec2">Import</a></li>
<li class="level1"><a href="#test_struct_sec3">Developing Suite Class</a></li>
<li class="level1"><a href="#test_struct_sec4">Class Methods and Variables</a></li>
<li class="level1"><a href="#test_struct_sec5">Test Cases</a></li>
<li class="level1"><a href="#test_struct_sec6">Test Case Code</a></li>
<li class="level1"><a href="#test_struct_sec7">Assertions</a></li>
<li class="level1"><a href="#test_struct_sec8">Working with the "env" object</a><ul><li class="level2"><a href="#test_struct_subsection8_1">Access to Devices</a></li>
<li class="level2"><a href="#test_struct_subsection8_2">Obtain connection information</a></li>
</ul>
</li>
<li class="level1"><a href="#test_struct_sec9">Switches Attributes and Methods</a><ul><li class="level2"><a href="#test_struct_subsection9_1">Read Switch Properties</a></li>
<li class="level2"><a href="#test_struct_subsection9_2">Set Switch Properties</a></li>
<li class="level2"><a href="#test_struct_subsection9_3">Clear Config</a></li>
</ul>
</li>
<li class="level1"><a href="#test_struct_sec10">ONS XML-RPC Switches Attributes and Methods</a><ul><li class="level2"><a href="#test_struct_subsection10_1">Read Switch Properties</a></li>
<li class="level2"><a href="#test_struct_subsection10_2">Set Switch Properties</a></li>
<li class="level2"><a href="#test_struct_subsection10_3">Clear Config</a></li>
<li class="level2"><a href="#test_struct_subsection10_4">Direct XML-RPC Queries</a></li>
</ul>
</li>
</ul>
</div>
<div class="textblock"><p>A group of test cases will be written in a python file which we call test suite. The name of the file should:</p>
<ul>
<li>be unique;</li>
<li>start with "test_";</li>
<li>contain clear information about test suite (e.g. feature, setup, table name, etc.)</li>
</ul>
<p>Test suite is divided into the following separate parts:</p>
<ul>
<li>header;</li>
<li>imports block;</li>
<li>additional functions (optional);</li>
<li>test class;</li>
<li>internal test class methods;</li>
<li>test cases</li>
</ul>
<h1><a class="anchor" id="test_struct_sec1"></a>
Header</h1>
<p>Each test case python file in TAF("testcases" directory) should contain a header where the main information about the file is stored.</p>
<ul>
<li><b>@copyright</b> - copyright section.</li>
<li><b>@file</b> - the name of the test suite (python file name).</li>
</ul>
<div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;@file  &lt;test_suite_name&gt;.py</div>
</div><!-- fragment --><ul>
<li><b>@summary</b> - the summary of the test suite.</li>
<li><b>@details</b> - list available test cases in the test suite.</li>
</ul>
<div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;@details</div>
<div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;Following test cases are tested:</div>
<div class="line"><a name="l00003"></a><span class="lineno">    3</span>&#160;1.      &lt;test 1 summary&gt;</div>
<div class="line"><a name="l00004"></a><span class="lineno">    4</span>&#160;2.      &lt;test 2 summary&gt;</div>
<div class="line"><a name="l00005"></a><span class="lineno">    5</span>&#160;3.      ..</div>
<div class="line"><a name="l00006"></a><span class="lineno">    6</span>&#160;4.      &lt;test N summary&gt;</div>
</div><!-- fragment --><p><b>Example:</b> </p>
<div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;<span class="stringliteral">&quot;&quot;&quot;</span></div>
<div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;<span class="stringliteral">@copyright Copyright (c) 2011 - 2016, Intel Corporation.</span></div>
<div class="line"><a name="l00003"></a><span class="lineno">    3</span>&#160;<span class="stringliteral"></span></div>
<div class="line"><a name="l00004"></a><span class="lineno">    4</span>&#160;<span class="stringliteral">Licensed under the Apache License, Version 2.0 (the &quot;License&quot;);</span></div>
<div class="line"><a name="l00005"></a><span class="lineno">    5</span>&#160;<span class="stringliteral">you may not use this file except in compliance with the License.</span></div>
<div class="line"><a name="l00006"></a><span class="lineno">    6</span>&#160;<span class="stringliteral">You may obtain a copy of the License at</span></div>
<div class="line"><a name="l00007"></a><span class="lineno">    7</span>&#160;<span class="stringliteral"></span></div>
<div class="line"><a name="l00008"></a><span class="lineno">    8</span>&#160;<span class="stringliteral">    http://www.apache.org/licenses/LICENSE-2.0</span></div>
<div class="line"><a name="l00009"></a><span class="lineno">    9</span>&#160;<span class="stringliteral"></span></div>
<div class="line"><a name="l00010"></a><span class="lineno">   10</span>&#160;<span class="stringliteral">Unless required by applicable law or agreed to in writing, software</span></div>
<div class="line"><a name="l00011"></a><span class="lineno">   11</span>&#160;<span class="stringliteral">distributed under the License is distributed on an &quot;AS IS&quot; BASIS,</span></div>
<div class="line"><a name="l00012"></a><span class="lineno">   12</span>&#160;<span class="stringliteral">WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.</span></div>
<div class="line"><a name="l00013"></a><span class="lineno">   13</span>&#160;<span class="stringliteral">See the License for the specific language governing permissions and</span></div>
<div class="line"><a name="l00014"></a><span class="lineno">   14</span>&#160;<span class="stringliteral">limitations under the License.</span></div>
<div class="line"><a name="l00015"></a><span class="lineno">   15</span>&#160;<span class="stringliteral"></span></div>
<div class="line"><a name="l00016"></a><span class="lineno">   16</span>&#160;<span class="stringliteral">@file test_acl_additional.py</span></div>
<div class="line"><a name="l00017"></a><span class="lineno">   17</span>&#160;<span class="stringliteral"></span></div>
<div class="line"><a name="l00018"></a><span class="lineno">   18</span>&#160;<span class="stringliteral">@summary   Test ACL Allow action with Ingress/Egress port implementation.</span></div>
<div class="line"><a name="l00019"></a><span class="lineno">   19</span>&#160;<span class="stringliteral"></span></div>
<div class="line"><a name="l00020"></a><span class="lineno">   20</span>&#160;<span class="stringliteral">@details</span></div>
<div class="line"><a name="l00021"></a><span class="lineno">   21</span>&#160;<span class="stringliteral">Following test cases are tested:</span></div>
<div class="line"><a name="l00022"></a><span class="lineno">   22</span>&#160;<span class="stringliteral">1. Verify that an ingress packet is mirrored</span></div>
<div class="line"><a name="l00023"></a><span class="lineno">   23</span>&#160;<span class="stringliteral">2. Verify that an egress packet is mirrored </span></div>
<div class="line"><a name="l00024"></a><span class="lineno">   24</span>&#160;<span class="stringliteral">&quot;&quot;&quot;</span></div>
</div><!-- fragment --><dl class="section note"><dt>Note</dt><dd>File header should NOT contain below: <div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;<span class="comment">#!/usr/bin/env python</span></div>
</div><!-- fragment --></dd></dl>
<h1><a class="anchor" id="test_struct_sec2"></a>
Import</h1>
<p>Import section has the following rules and sequence in TAF python code:</p>
<ul>
<li>import standard module (e.g., os, time);</li>
<li>import 3rd-party libraries (e.g., pytest);</li>
<li>import framework-specific libraries (e.g., from testlib import helpers);</li>
<li>each section of above import group has to be separated by a blank line</li>
</ul>
<p><b>Example:</b> </p>
<div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;<span class="keyword">import</span> time</div>
<div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;<span class="keyword">import</span> os</div>
<div class="line"><a name="l00003"></a><span class="lineno">    3</span>&#160;</div>
<div class="line"><a name="l00004"></a><span class="lineno">    4</span>&#160;<span class="keyword">import</span> pytest</div>
<div class="line"><a name="l00005"></a><span class="lineno">    5</span>&#160;</div>
<div class="line"><a name="l00006"></a><span class="lineno">    6</span>&#160;<span class="keyword">from</span> testlib <span class="keyword">import</span> helpers</div>
<div class="line"><a name="l00007"></a><span class="lineno">    7</span>&#160;<span class="keyword">from</span> testlib <span class="keyword">import</span> loggers</div>
</div><!-- fragment --><h1><a class="anchor" id="test_struct_sec3"></a>
Developing Suite Class</h1>
<p>Create class with unique name per suite (with appropriate docstring).</p>
<dl class="section note"><dt>Note</dt><dd>Do not use any of Unittest style methods for py.test test cases. All necessary fixtures/setup/teardowns have to be defined using py.test features.</dd></dl>
<p>Class name should start with <b>"Test"</b>. Class decorators should contain the following information:</p>
<ul>
<li>full cross connection setup name;</li>
<li>information about premium functionality (optional);</li>
<li>information about features that are tested;</li>
<li>list of platform in case test suite/case is platform dependent (optional);</li>
<li>mark to skip pidchecker plugin (optional)</li>
</ul>
<p><b>Example:</b> </p>
<div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;@pytest.mark.simplified</div>
<div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;@helpers.run_on_platforms([<span class="stringliteral">&quot;lxc&quot;</span>, ]) </div>
<div class="line"><a name="l00003"></a><span class="lineno">    3</span>&#160;@pytest.mark.skip_pidcheck(<span class="stringliteral">&quot;snmpd&quot;</span>)</div>
<div class="line"><a name="l00004"></a><span class="lineno">    4</span>&#160;@pytest.mark.acl</div>
<div class="line"><a name="l00005"></a><span class="lineno">    5</span>&#160;@pytest.mark.lag</div>
<div class="line"><a name="l00006"></a><span class="lineno">    6</span>&#160;<span class="keyword">class </span>TestRSTPSimplified(object):</div>
<div class="line"><a name="l00007"></a><span class="lineno">    7</span>&#160;<span class="stringliteral">&quot;&quot;&quot;</span></div>
<div class="line"><a name="l00008"></a><span class="lineno">    8</span>&#160;<span class="stringliteral">@description Suite for testing custom feature. </span></div>
<div class="line"><a name="l00009"></a><span class="lineno">    9</span>&#160;<span class="stringliteral">&quot;&quot;&quot;</span></div>
</div><!-- fragment --><p>It's recommended to register all your markers in pytest.ini file. </p>
<pre class="fragment"># content of pytest.ini
[pytest]
markers =
    simplified: mark a tests which have to be execudted on "simplified" setup.
</pre><p>The following setups are allowed: simplified, golden, and diamond.</p>
<h1><a class="anchor" id="test_struct_sec4"></a>
Class Methods and Variables</h1>
<p>This section contains internal variables and help methods used in the particular test suite.</p>
<p>Section should start with following comment separated with a blank line: </p>
<div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;<span class="comment"># Attributes and Properties</span></div>
</div><!-- fragment --><p>Then, class attributes should contain short inline description: </p>
<div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;tp_id = 0x9100</div>
<div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;tagged = <span class="stringliteral">&quot;Tagged&quot;</span></div>
<div class="line"><a name="l00003"></a><span class="lineno">    3</span>&#160;untagged = <span class="stringliteral">&quot;Untagged&quot;</span></div>
</div><!-- fragment --><p>Class method should have a docstring with following parts:</p>
<ul>
<li>brief summary with method description;</li>
<li>parameters with name and description (optional);</li>
<li>return value description (optional);</li>
<li>usage examples (optional).</li>
</ul>
<h1><a class="anchor" id="test_struct_sec5"></a>
Test Cases</h1>
<p>This section will contain all test cases that belong to a test suite, and should start with the following comment before/after a blank line: </p>
<div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;<span class="comment"># Test cases</span></div>
</div><!-- fragment --><p>Test case name should start with <b>"test_"</b> and followed by major information about the particular test case in a short form. E.g., test_qinq_01. Not good for "test_verify_that_..."</p>
<p>Write a summary of the particular test case which should explain actual device\'s behavior.</p>
<p>Describe test steps of the particular test case.</p>
<p><b>Example:</b> </p>
<div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;<span class="keyword">def </span>test_bpdu_packet_format(self, env):</div>
<div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;    <span class="stringliteral">&quot;&quot;&quot;</span></div>
<div class="line"><a name="l00003"></a><span class="lineno">    3</span>&#160;<span class="stringliteral">    @brief Verify that BPDU packets sent by switch are correctly formatted.</span></div>
<div class="line"><a name="l00004"></a><span class="lineno">    4</span>&#160;<span class="stringliteral"></span></div>
<div class="line"><a name="l00005"></a><span class="lineno">    5</span>&#160;<span class="stringliteral">    @steps</span></div>
<div class="line"><a name="l00006"></a><span class="lineno">    6</span>&#160;<span class="stringliteral">        -# Capture BPDU frames from the DUT</span></div>
<div class="line"><a name="l00007"></a><span class="lineno">    7</span>&#160;<span class="stringliteral">        -# Verify BPDU frames are correctly formatted</span></div>
<div class="line"><a name="l00008"></a><span class="lineno">    8</span>&#160;<span class="stringliteral">    @endsteps</span></div>
<div class="line"><a name="l00009"></a><span class="lineno">    9</span>&#160;<span class="stringliteral">    &quot;&quot;&quot;</span></div>
</div><!-- fragment --><h1><a class="anchor" id="test_struct_sec6"></a>
Test Case Code</h1>
<p>Test case implementation is followed based on the test steps with clear comments. </p>
<dl class="section note"><dt>Note</dt><dd>when logging is required, suite_logger is a mandatory name for logger</dd></dl>
<p>At the beginning of the test, the links should be defined for this particular test.</p>
<div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;ports = env.get_ports([[<span class="stringliteral">&#39;tg1&#39;</span>, <span class="stringliteral">&#39;sw1&#39;</span>, 1], ])</div>
</div><!-- fragment --> <dl class="section note"><dt>Note</dt><dd>Specify devices by acronyms and number of links where the acronym consists of two parts:<ul>
<li>device type: tg - traffic generator; sw - switch; hub - hub.</li>
<li>device number (numbering begins from 1).</li>
</ul>
</dd></dl>
<p>Set admin mode to "Disabled" for all ports and then enable only necessary ones: </p>
<div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;helpers.set_all_ports_admin_disabled(env.switch)</div>
<div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;helpers.set_ports_admin_enabled(env.switch, ports)</div>
</div><!-- fragment --><dl class="section note"><dt>Note</dt><dd>By default these functions have the <em>wait_status</em> option equal <em>True</em>, and they check if the ports pass Down/Up operational status.</dd></dl>
<p>Perform actions based on test case steps using already developed helpers and embedded class methods functionality as much as possible. <b>Avoid code repetition.</b> If needed, create your own helper functions and move them into a library.</p>
<h1><a class="anchor" id="test_struct_sec7"></a>
Assertions</h1>
<p>Use an "assert" operator to check numeric conditions or an "if" statement + "pytest.fail('Some informative message')" to check complex conditions in case additional actions are required.</p>
<p><b>Example:</b> </p>
<div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;<span class="keyword">def </span>test_something(env):</div>
<div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;    ret_code = do_some_action(env.tg[1])</div>
<div class="line"><a name="l00003"></a><span class="lineno">    3</span>&#160;    <span class="keyword">assert</span> ret_code == <span class="stringliteral">&quot;Everithing is good&quot;</span>, <span class="stringliteral">&quot;Something goes wrong...&quot;</span></div>
<div class="line"><a name="l00004"></a><span class="lineno">    4</span>&#160;    <span class="keywordflow">try</span>:</div>
<div class="line"><a name="l00005"></a><span class="lineno">    5</span>&#160;        <span class="comment"># This action could cause device crash</span></div>
<div class="line"><a name="l00006"></a><span class="lineno">    6</span>&#160;        do_some_stuff()</div>
<div class="line"><a name="l00007"></a><span class="lineno">    7</span>&#160;    <span class="keywordflow">except</span>:</div>
<div class="line"><a name="l00008"></a><span class="lineno">    8</span>&#160;        dump_crash_info()</div>
<div class="line"><a name="l00009"></a><span class="lineno">    9</span>&#160;        message = <span class="stringliteral">&quot;Test fail&quot;</span></div>
<div class="line"><a name="l00010"></a><span class="lineno">   10</span>&#160;        self.suite_logger.error(message)</div>
<div class="line"><a name="l00011"></a><span class="lineno">   11</span>&#160;        pytest.fail(message)</div>
</div><!-- fragment --><dl class="section note"><dt>Note</dt><dd>Fail messages has to be clear enough to understand failure reason and be unique (different failures have to produce different messages).</dd></dl>
<h1><a class="anchor" id="test_struct_sec8"></a>
Working with the "env" object</h1>
<h2><a class="anchor" id="test_struct_subsection8_1"></a>
Access to Devices</h2>
<pre class="fragment">env
  |_switch
  |_tg
  |_cross
  |_hub
  |_lhost
</pre><p>All described env attributes are dictionaries. Device classes are accessible by index, for example: </p>
<div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;env.switch[2]</div>
<div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;env.tg[1]</div>
</div><!-- fragment --><dl class="section note"><dt>Note</dt><dd><b>All indexes in env object starts from 1!!!</b></dd></dl>
<p>Please read about particular device methods in appropriate dev_*.py module documentation.</p>
<h2><a class="anchor" id="test_struct_subsection8_2"></a>
Obtain connection information</h2>
<p>The <b>get_ports</b> method returns the ports dictionary.</p>
<div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;env.get_ports(links)</div>
<div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;env.get_ports([[<span class="stringliteral">&#39;tg1&#39;</span>, <span class="stringliteral">&#39;sw1&#39;</span>, 2], [<span class="stringliteral">&#39;sw1&#39;</span>, <span class="stringliteral">&#39;sw2&#39;</span>, 1], ])</div>
</div><!-- fragment --><p><em>ports</em> contain real interface names for traffic generators and real port numbers for switches, for example: </p>
<div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;ports[(<span class="stringliteral">&#39;sw1&#39;</span>, <span class="stringliteral">&#39;tg1&#39;</span>)][1] == 24</div>
<div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;ports[(<span class="stringliteral">&#39;tg1&#39;</span>, <span class="stringliteral">&#39;sw1&#39;</span>)][1] == <span class="stringliteral">&quot;vlab0&quot;</span></div>
<div class="line"><a name="l00003"></a><span class="lineno">    3</span>&#160;ports[(<span class="stringliteral">&#39;tg2&#39;</span>, <span class="stringliteral">&#39;sw3&#39;</span>)][1] == (1, 1, 10)</div>
</div><!-- fragment --><p>In most cases you don't need to use other first level <em>env</em> methods. But you can check them here testlib::common3::Environment.</p>
<h1><a class="anchor" id="test_struct_sec9"></a>
Switches Attributes and Methods</h1>
<p>TAF provides a possibility to configure devices using different User Interfaces (xmlrpc, cli, linux commands). For these purposes Switch object has "ui" abstraction layer.</p>
<h2><a class="anchor" id="test_struct_subsection9_1"></a>
Read Switch Properties</h2>
<div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;switch_property = env.switch[1].ui.get_table_&lt;table&gt;()[row_id][param]</div>
<div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;row_dict = env.switch[1].ui.get_table_&lt;table&gt;()[row_id]</div>
<div class="line"><a name="l00003"></a><span class="lineno">    3</span>&#160;table_content = env.switch[1].ui.get_table_&lt;table&gt;()</div>
</div><!-- fragment --><p> <b>Where:</b></p>
<ul>
<li>table - table name, such as "ports";</li>
<li>param - string, such as "adminMode";</li>
<li>row_id - integer, row Id</li>
</ul>
<h2><a class="anchor" id="test_struct_subsection9_2"></a>
Set Switch Properties</h2>
<div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;env.switch[1].ui.modify_*(row_list, param=value)</div>
<div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;env.switch[1].ui.create_*(values)</div>
</div><!-- fragment --><p> <b>Where:</b></p>
<ul>
<li>row_list - list of rows where changes will be performed;</li>
<li>param - string, such as "adminMode";</li>
<li>value - new value for parameter;</li>
<li>values - list of new values that will be created</li>
</ul>
<p><b>Example:</b> </p>
<div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;port_id = 1</div>
<div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;env.switch[1].ui.get_table_ports()</div>
<div class="line"><a name="l00003"></a><span class="lineno">    3</span>&#160;vlans = [2, 3]</div>
<div class="line"><a name="l00004"></a><span class="lineno">    4</span>&#160;env.switch[1].ui.create_vlans(vlans)</div>
</div><!-- fragment --><h2><a class="anchor" id="test_struct_subsection9_3"></a>
Clear Config</h2>
<div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;env.switch[1].ui.clear_config()</div>
</div><!-- fragment --><p>For all methods you can check testlib::ui_wrapper::UiInterface.</p>
<h1><a class="anchor" id="test_struct_sec10"></a>
ONS XML-RPC Switches Attributes and Methods</h1>
<h2><a class="anchor" id="test_struct_subsection10_1"></a>
Read Switch Properties</h2>
<div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;switch_property = env.switch[1].getprop(table, param, _id)</div>
<div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;row_dict = env.switch[1].getprop_row(table, row_id)</div>
<div class="line"><a name="l00003"></a><span class="lineno">    3</span>&#160;table_content = env.switch[1].getprop_table(table)</div>
</div><!-- fragment --><p> <b>Where:</b></p>
<ul>
<li>table - string, such as "Ports";</li>
<li>param - string, such as "adminMode";</li>
<li>row_id - integer, row Id</li>
</ul>
<h2><a class="anchor" id="test_struct_subsection10_2"></a>
Set Switch Properties</h2>
<div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;env.switch[1].setprop(table, param, values)</div>
<div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;env.switch[1].setprop_row(table, values)</div>
</div><!-- fragment --><p> <b>Where:</b></p>
<ul>
<li>table - string, such as "Ports";</li>
<li>param - string, such as "adminMode";</li>
<li>values - list containing necessary parameters for xmlrpc query, such as [1, "Up"]</li>
</ul>
<p><b>Example:</b></p>
<div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;port_id = 1</div>
<div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;env.switch[1].setprop(<span class="stringliteral">&quot;Ports&quot;</span>, <span class="stringliteral">&quot;adminMode&quot;</span>, [port_id, <span class="stringliteral">&quot;Up&quot;</span>])</div>
<div class="line"><a name="l00003"></a><span class="lineno">    3</span>&#160;vlan_id = 2</div>
<div class="line"><a name="l00004"></a><span class="lineno">    4</span>&#160;env.switch[1].setprop_row(<span class="stringliteral">&quot;Vlans&quot;</span>, [vlan_id, <span class="stringliteral">&quot;MyVLAN&quot;</span>])</div>
</div><!-- fragment --><h2><a class="anchor" id="test_struct_subsection10_3"></a>
Clear Config</h2>
<div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;env.switch[1].clearconfig()</div>
</div><!-- fragment --> <h2><a class="anchor" id="test_struct_subsection10_4"></a>
Direct XML-RPC Queries</h2>
<div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;env.switch[2].xmlproxy.nb.Platform.getRow(1)</div>
</div><!-- fragment --> </div></div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated on Tue Jan 31 2017 16:21:23 for Test Automation Framework by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.6 </li>
  </ul>
</div>
</body>
</html>
